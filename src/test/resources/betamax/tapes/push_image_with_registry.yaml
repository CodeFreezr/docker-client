!tape
name: push image with registry
interactions:
- recorded: 2014-07-05T17:38:58.128Z
  request:
    method: POST
    uri: http://172.17.42.1:4243/images/create?fromImage=scratch&tag=&registry=
    headers:
      Accept: '*/*'
      Content-Length: '0'
      Host: 172.17.42.1:4243
      Proxy-Connection: Keep-Alive
  response:
    status: 200
    headers:
      Content-Type: application/json
      Date: Sat, 05 Jul 2014 17:38:56 GMT
    body: "{\"status\":\"Pulling repository scratch\"}\r\n{\"status\":\"Pulling image (latest) from scratch\",\"progressDetail\":{},\"id\":\"511136ea3c5a\"}{\"status\":\"Pulling image (latest) from scratch, endpoint: https://cdn-registry-1.docker.io/v1/\",\"\
      progressDetail\":{},\"id\":\"511136ea3c5a\"}{\"status\":\"Pulling dependent layers\",\"progressDetail\":{},\"id\":\"511136ea3c5a\"}{\"status\":\"Download complete\",\"progressDetail\":{},\"id\":\"511136ea3c5a\"}{\"status\":\"Download complete\",\"progressDetail\"\
      :{},\"id\":\"511136ea3c5a\"}"
- recorded: 2014-07-05T17:38:58.147Z
  request:
    method: POST
    uri: http://172.17.42.1:4243/images/511136ea3c5a/tag?repo=gesellix%2Ftest&force=0
    headers:
      Accept: '*/*'
      Content-Length: '0'
      Host: 172.17.42.1:4243
      Proxy-Connection: Keep-Alive
  response:
    status: 201
    headers:
      Content-Type: text/plain; charset=utf-8
      Date: Sat, 05 Jul 2014 17:38:58 GMT
    body: ''
- recorded: 2014-07-05T17:38:58.167Z
  request:
    method: POST
    uri: http://172.17.42.1:4243/images/gesellix/test/tag?repo=localhost%3A5000%2Fgesellix%2Ftest&force=0
    headers:
      Accept: '*/*'
      Content-Length: '0'
      Host: 172.17.42.1:4243
      Proxy-Connection: Keep-Alive
  response:
    status: 201
    headers:
      Content-Type: text/plain; charset=utf-8
      Date: Sat, 05 Jul 2014 17:38:58 GMT
    body: ''
- recorded: 2014-07-05T17:39:00.240Z
  request:
    method: POST
    uri: http://172.17.42.1:4243/images/localhost:5000/gesellix/test/push?registry=localhost%3A5000
    headers:
      Accept: '*/*'
      Content-Length: '0'
      Host: 172.17.42.1:4243
      Proxy-Connection: Keep-Alive
      X-Registry-Auth: eyJ1c2VybmFtZSI6Imdlc2VsbGl4IiwicGFzc3dvcmQiOiIteWV0LWFub3RoZXItcGFzc3dvcmQtIiwiZW1haWwiOiJ0b2JpYXNAZ2VzZWxsaXguZGUiLCJzZXJ2ZXJhZGRyZXNzIjoiaHR0cHM6Ly9pbmRleC5kb2NrZXIuaW8vdjEvIn0=
  response:
    status: 200
    headers:
      Content-Type: application/json
      Date: Sat, 05 Jul 2014 17:39:00 GMT
    body: "{\"status\":\"The push refers to a repository [localhost:5000/gesellix/test] (len: 1)\"}\r\n{\"status\":\"Sending image list\"}\r\n{\"status\":\"Pushing repository localhost:5000/gesellix/test (1 tags)\"}\r\n{\"status\":\"Pushing\",\"progressDetail\"\
      :{},\"id\":\"511136ea3c5a\"}{\"status\":\"Buffering to disk\",\"progressDetail\":{\"current\":1536,\"start\":1404581940},\"progress\":\"1.536 kB\",\"id\":\"511136ea3c5a\"}{\"status\":\"Buffering to disk\",\"progressDetail\":{\"start\":1404581940},\"id\"\
      :\"511136ea3c5a\"}{\"status\":\"Pushing\",\"progressDetail\":{\"current\":512,\"total\":1536,\"start\":1404581940},\"progress\":\"[================\\u003e                                  ]    512 B/1.536 kB 0\",\"id\":\"511136ea3c5a\"}{\"status\":\"Pushing\"\
      ,\"progressDetail\":{\"current\":1024,\"total\":1536,\"start\":1404581940},\"progress\":\"[=================================\\u003e                 ] 1.024 kB/1.536 kB 0\",\"id\":\"511136ea3c5a\"}{\"status\":\"Pushing\",\"progressDetail\":{\"current\"\
      :1536,\"total\":1536,\"start\":1404581940},\"progress\":\"[==================================================\\u003e] 1.536 kB/1.536 kB\",\"id\":\"511136ea3c5a\"}{\"status\":\"Pushing\",\"progressDetail\":{\"current\":1536,\"total\":1536,\"start\":1404581940},\"\
      progress\":\"[==================================================\\u003e] 1.536 kB/1.536 kB\",\"id\":\"511136ea3c5a\"}{\"status\":\"Image successfully pushed\",\"progressDetail\":{},\"id\":\"511136ea3c5a\"}{\"status\":\"Pushing tag for rev [511136ea3c5a]\
      \ on {http://localhost:5000/v1/repositories/gesellix/test/tags/latest}\"}\r\n"
